---
layout: post
title: "进程"
description: ""
category: "linux"
tags: [linux]
---
{% include JB/setup %}

## 进程

> 一个其中运行着一个或多个线程的地址空间和这些线程所需要的系统资源。

当我们在一个现代操作系统上运行一个程序时，会得到一个假象，就好像我们的程序是系统中当前运行着的唯一的程序。我们的程序好像是独占地使用处理器和存储器。处理器就好像是无间断地一条接一条地执行程序中的指令。最后，我们程序中的代码和数据好像是系统存储器中唯一的对象。这些假象都是通过进程的概念提供给我们的。

进程的经典定义就是*一个执行中的程序的实例*。系统中的每个程序都是运行在某个进程的上下文中的。上下文是由程序正确运行所需的状态组成的。这个状态包括存放在存储器中的程序的代码和数据，它的栈、通用目的寄存器的内容、程序计数器、环境变量以及打开文件描述符的集合。

每次用户通过向外壳输入一个可执行目标文件的名字，并运行一个程序时，外壳就会创建一个新的进程，然后在这个新进程的上下文中运行这个可执行目标文件。应用程序也能够创建新进程，且在这个新进程的上下文中运行它们自己的代码或其他应用程序。

进程提供给应用程序的关键抽象：

* 一个独立的逻辑控制流，它提供一个假象，好像我们的程序独占使用处理器。
* 一个私有的地址空间，它提供一个假象，好像我们的程序独占地使用存储器系统。

### 进程标识符 PID

每个进程都会被分配一个唯一非负的数字编号，我们称之为*进程标识符*或PID。它通常是一个取值范围从2到32768的正整数。当进程被启动时，系统将按顺序选择下一个未被使用的数字作为它的PID，当数字已经回饶一圈时，新的PID重新从2开始。

虽然PID是唯一的，但是可以重用。当一个进程终止后，其进程ID就可以再次使用了。大多数UNIX系统实现延迟重用算法，使得赋予新建进程的ID不同于最近终止进程所使用的ID。这防止了将新进程误认为是使用同一ID的某个已终止的先前进程。

ID为0的进程通常是调度进程，常常称为*交换进程(swaper)*。该进程是内核的一部分，它并不执行任何磁盘上的程序，因此也被称为*系统进程*。

ID为1的进程通常是init进程，在自举过程结束时由内核调用。init通常读与系统有关的初始化文件（/etc/rc*文件或/etc/inittab文件，以及/etc/init.d/中的文件），并将系统引导到一个状态（例如多用户）。init进程决不会终止。它是一个普通用的用户进程（与交换进程不同，它不是内核中的系统进程），但是它以超级用户特权运行。

常用标识符获取函数

	#include <unistd.h>
	pid_t getpid(void);		// 返回调用进程的ID
	pid_t getppid(void);		// 返回调用进程的父进程ID
	uid_t getuid(void);		// 返回调用进程的实际用户ID
	uid_t geteuid(void);		// 返回调用进程的有效用户ID
	gid_t getgid(void);		// 返回调用进程的实际组ID
	gid_t getegid(void);		// 返回调用进程的有效组ID






* 进程资源

